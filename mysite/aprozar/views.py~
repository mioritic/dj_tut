from django.shortcuts import render_to_response
from django.http import HttpResponse
from mysite.aprozar.models import Products
from django.template import Library

register = Library()
# Create your views here.
#def index(request):
#    return HttpResponse("Hello")
def index(request):
    latest_prod_list = Products.objects.all()[:5]
#    return render_to_response('aprozar/index_aprozar.html', {'object_list': latest_prod_list})
    return render_to_response('aprozar/index.html', {'object_list': latest_prod_list})

# using the decorator syntax to register our new inclusion tag: show_results:
#@register.inclusion_tag('aprozar/show_results.html')
def show_results():
    products = Products.objects.all()
    return {'products' : products}

def search_form(cl):
    """
    Displays a search form for searching the list.
    """
    return {
        'cl': cl,
        'show_result_count': cl.result_count != cl.full_result_count,
        'search_var': SEARCH_VAR
    }
search_form = register.inclusion_tag('admin/search_form.html')(search_form)
